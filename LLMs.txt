# Nablarch Framework Analysis and References

## Part 1: Framework Analysis

1. Overview
Nablarch is a Java application development and execution platform created by TIS for building mission-critical systems. It provides a comprehensive framework that integrates extensive experience in building mission-critical systems. The framework consists of execution control infrastructure for different processing methods (web, batch, etc.) and provides individual functionalities such as database access and validation.

1.1. Core Architecture
- Handler Queue based execution model
- Clear separation between execution infrastructure and business logic
- Modular design with pluggable components
- Support for multiple runtime platforms:
  * Web applications with HTML-based UI
  * RESTful Web Services
  * Batch processing (both Jakarta Batch and Nablarch native)
  * Messaging systems (MOM and DB-queue based)

2. Core Features
- Handler queue-based request processing architecture
- Built-in validation and type conversion capabilities
- Comprehensive domain validation support
- Rich set of standard library components
- Multiple batch processing approaches:
  * Jakarta Batch compliant processing
  * Nablarch native batch with database integration
  * DB-less batch processing
- Web application framework with JSP/Thymeleaf support
- RESTful API and HTTP messaging support
- Both synchronous and asynchronous messaging capabilities

3. Key Components

a) Handler Queue System
- Handler categories:
  * Common handlers (Global error, Thread context, etc.)
  * Web application specific handlers
  * Batch processing handlers
  * REST/Web service handlers
  * Database transaction handlers
- Security handlers:
  * CSRF protection
  * Authentication/Authorization
  * Input validation
- Resource management handlers:
  * Database connection
  * File handling
  * Message queues
- Standard handler implementations:
  * Request routing
  * Data format conversion
  * Validation processing
  * Transaction control
  * Multi-thread execution

b) Libraries
- Database access with transaction management
- Comprehensive file I/O operations
- Structured logging system
- Advanced validation framework
  * Bean validation
  * Domain validation
  * Cross-field validation
- Type conversion with normalization
- Code management system
- Authentication/Authorization

4. Architecture Principles
- Strict handler-based request processing
- Clear separation of concerns through modular design
- Support for both synchronous and asynchronous processing
- Comprehensive transaction management:
  * Database transaction control
  * Batch transaction handling
  * Messaging transaction support
- Thread safety by design
- No null collections (empty collections returned instead)
- English-standardized logs and messages
- Configurable SQL execution
- Minimal external dependencies

5. Development Support
- Comprehensive testing framework
  * Automated test support
  * Multi-thread testing limitations
  * Database testing utilities
- Development tools suite:
  * SQL Executor for database operations
  * DBA support tools
  * Code generators
- Maven-based project management
  * Archetype-based project generation
  * Multiple project templates
  * Dependency management
- Extensive blank project templates:
  * Web application templates
  * RESTful service templates
  * Batch application templates
  * Container-ready templates

6. Validation Features

6.1. Bean Validation (JSR-380)
- Standard constraint annotations
- Custom constraint definitions
- Group validation support
- Message interpolation
- Validation sequence definition
- Integration with JAX-RS
- Automatic validation in web apps

6.2. Nablarch Native Validation
- Domain-driven validation design:
  * Centralized validation rules
  * Type-safe domain definitions
  * Reusable validation patterns
  * Easy maintenance and updates
- Advanced features:
  * Pre-validation type conversion
  * Input value normalization
  * Cross-field validation rules
  * Database lookup validation
  * Custom validation rules
- Implementation options:
  * Annotation-based configuration
  * Programmatic validation
  * Custom validator development
  * Domain-specific validators

6.3. Form/Entity Validation
- Automatic form binding
- Entity validation support
- Validation result handling
- Custom message resolution
- Property name interpolation
- Validation groups support
- Error message customization

7. Best Practices
- Clear separation of handler responsibilities
- Preference for domain validation over individual annotations
- Proper transaction management:
  * Appropriate transaction boundaries
  * Error handling within transactions
  * Proper resource management
- Standardized error handling:
  * Global error handling
  * Business error management
  * System error processing
- Consistent logging practices:
  * Structured log formats
  * Performance logging
  * Operation logging
  * Monitoring support

8. Limitations and Considerations
- Testing framework limitations:
  * No multi-thread testing support
  * Limited Jakarta Batch testing capabilities
- Batch processing considerations:
  * Potential delays in resident batch processing
  * Recommendation to use DB queue messaging for certain scenarios
- SQL execution constraints:
  * No support for WITH clause
  * IN clause limitations
  * DATETIME literal restrictions
- Java compatibility:
  * Java 17 compliance
  * Special considerations for Java 21
  * Container deployment requirements

9. Development Tools and Utilities
- SQL Executor:
  * Interactive SQL execution
  * Support for Nablarch SQL syntax
  * Multiple database support
  * Real-time execution feedback
  * Transaction management
  * Query optimization support
- Testing Framework:
  * Unit test support
  * Automated test framework
  * Test tools for development
  * Database testing utilities
  * Mock object support
- Build and Deployment:
  * Maven plugins
  * Container support
  * Database management tools
  * Migration utilities
  * Environment configuration

10. Project Structure and Organization
- Module-based architecture:
  * Core framework modules
  * Extension modules
  * Application modules
  * Custom project modules
- Layered architecture patterns:
  * Presentation layer
  * Business logic layer
  * Data access layer
  * Common utilities layer
- Application type support:
  * Web applications (JSP/Thymeleaf)
  * Batch applications (Jakarta/Native)
  * RESTful services
  * Messaging systems (MOM/DB)
- Container deployment support:
  * Docker container support
  * Cloud-ready architecture
  * Scalability considerations
  * Monitoring integration
  * Security compliance

## Part 2: Documentation References

1. Core Documentation
- Main Overview: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/nablarch/index.html
- Architecture Details: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/nablarch/architecture.html
- Big Picture: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/nablarch/big_picture.html

2. Application Types
- Web Applications: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/web/index.html
- Batch Applications: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/batch/nablarch_batch/index.html
- RESTful Web Services: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/web_service/rest/index.html

3. Framework Features
- Validation: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/libraries/validation/index.html
- Database Access: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/libraries/database/index.html
- Security: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/libraries/authentication.html

4. Development Resources
- Getting Started: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/web/getting_started/index.html
- Example Applications: https://nablarch.github.io/docs/LATEST/doc/en/examples/index.html
- API Documentation: https://nablarch.github.io/docs/6u2/javadoc/

5. Known Issues and Limitations
- Policy Document: https://nablarch.github.io/docs/LATEST/doc/en/application_framework/application_framework/nablarch/policy.html
- Testing Limitations: https://nablarch.github.io/docs/LATEST/doc/en/development_tools/testing_framework/index.html
